<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Growsoft Docs</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">G</div>
        <div class="title">Growsoft Docs</div>
      </div>

      <nav class="nav">
        <a href="#home" class="nav-item">Home</a>
        <a href="#callbacks" class="nav-item">Callbacks</a>
        <a href="#player" class="nav-item">Player API</a>
        <a href="#world" class="nav-item">World API</a>
        <a href="#tile" class="nav-item">Tile API</a>
        <a href="#item" class="nav-item">Item API</a>
        <a href="#inventory_drop" class="nav-item">Inventory / Drop</a>
        <a href="#server_global" class="nav-item">Server & Global</a>
        <a href="#os_library" class="nav-item">OS Library</a>
        <a href="#libraries" class="nav-item">Libraries</a>
        <a href="#dialog_syntax" class="nav-item">Dialog Syntax</a>
        <a href="#examples" class="nav-item">Examples</a>
      </nav>

      <div class="sidebar-footer">
        <div>Theme: Minimal Gaming</div>
        <div class="small">Collapsible full docs • No Search</div>
      </div>
    </aside>

    <main class="content">
      <header class="header">
        <h1>Growsoft Docs</h1>
        <p class="lead">Complete Growsoft Lua API documentation — callbacks, player/world/tile/item functions, server utilities, dialog syntax, and examples.</p>
      </header>

      <section id="home" class="section">
        <h2>Home</h2>
        <p>Welcome to <strong>Growsoft Docs</strong>. This site is a full reference for Growsoft Lua scripting APIs extracted from your Growsoft API file: callbacks, objects, functions, dialog syntax, and example scripts.</p>
        <p>Use the sidebar to jump between categories. Click any section header to expand/collapse details.</p>
      </section>

      <!-- CALLBACKS -->
      <section id="callbacks" class="section collapsible">
        <button class="collapsible-button">Callbacks (click to expand)</button>
        <div class="collapsible-content">
          <h3>General callbacks</h3>
          <ul>
            <li><code>onPlayerDialogCallback(world, player, data)</code> — handles player dialog interactions; <code>data</code> includes <code>dialog_name</code> and <code>buttonClicked</code>.</li>
            <li><code>onPlayerConsumableCallback(world, player, tile, clickedPlayer, itemID)</code></li>
            <li><code>onTileWrenchCallback(world, player, tile)</code></li>
            <li><code>onPlayerWrenchCallback(world, wrenchingPlayer)</code></li>
            <li><code>onPlayerLoginCallback(player)</code></li>
            <li><code>onTilePlaceCallback(world, player, tile, placingID)</code> — return <code>true</code> to prevent placement.</li>
            <li><code>onPlayerTick(player)</code> — called every 1000ms per online player.</li>
            <li><code>onWorldTick(world)</code> — called every 100ms for each active world.</li>
            <li><code>onTick()</code> — global every 100ms.</li>
            <li><code>onPlayerFirstTimeLoginCallback(player)</code></li>
            <li><code>onPlayerEnterWorldCallback(world, player)</code></li>
            <li><code>onPlayerLeaveWorldCallback(world, player)</code></li>
            <li><code>onTilePunchCallback(world, avatar, tile)</code> — return <code>true</code> to prevent default break.</li>
            <li><code>onPlayerDisconnectCallback(player)</code></li>
            <li><code>onPlayerDeathCallback(world, player, isRespawn)</code></li>
            <li><code>onPlayerDropCallback(world, player, itemID, itemCount)</code> — return <code>true</code> to prevent drop.</li>
            <li><code>onPlayerLevelUPCallback(world, player, levelReached)</code></li>
            <li><code>onPlayerEquipClothingCallback(world, player, itemID)</code> — return <code>true</code> to prevent equipping.</li>
            <li><code>onPlayerUnequipClothingCallback(world, player, itemID)</code> — return <code>true</code> to prevent unequipping.</li>
            <li><code>onPlayerPickupItemCallback(world, player, itemID, itemCount)</code> — return <code>true</code> to prevent pickup.</li>
            <li><code>onPlayerEnterDoorCallback(world, player, targetWorldName, doorID)</code> — return <code>true</code> to prevent entry.</li>
            <li><code>onPlayerPlantCallback(world, player, tile)</code></li>
            <li><code>onPlayerHarvestCallback(world, player, tile)</code></li>
            <li><code>onPlayerCatchFishCallback(world, player, itemID, itemCount)</code></li>
            <li><code>onPlayerCrimeCallback(world, player, itemID, itemCount)</code></li>
            <li><code>onPlayerSurgeryCallback(world, player, itemID, itemCount)</code></li>
            <li><code>onPlayerKillCallback(world, player, killedPlayer)</code></li>
            <li><code>onPlayerProviderCallback(world, player, tile, itemID, itemCount)</code></li>
            <li><code>onPlayerHarmonicCallback(world, player, tile, itemID, itemCount)</code></li>
            <li><code>onPlayerGeigerCallback(world, player, itemID, itemCount)</code></li>
            <li><code>onPlayerCatchGhostCallback(world, player, itemID, itemCount)</code></li>
            <li><code>onPlayerXPCallback(world, player, amount)</code></li>
            <li><code>onPlayerFirePutOutCallback(world, player, tile)</code></li>
            <li><code>onPlayerEarnGrowtokenCallback(world, player, itemCount)</code></li>
            <li><code>onPlayerTrainFishCallback(world, player)</code></li>
            <li><code>onPlayerGemsObtainedCallback(world, player, amount)</code></li>
            <li><code>onTileBreakCallback(world, player, tile)</code></li>
            <li><code>onPlayerAddFriendCallback(world, player, addedPlayer)</code></li>
            <li><code>onPlayerTradeCallback(world, player1, player2, items1, items2)</code></li>
            <li><code>onPlayerVariantCallback(player, variant, delay, netID)</code> — low-level packet variant handling.</li>
            <li><code>onPlayerRawPacketCallback(player, data)</code> — advanced raw packet handling.</li>
            <li><code>onPlayerEquippedClothingCallback(world, player, item_id)</code> — after equipping.</li>
            <li><code>onPlayerUnequippedClothingCallback(world, player, item_id)</code> — after unequipping.</li>
            <li><code>onPlayerTrashCallback(world, player, item_id, item_amount)</code> — return <code>true</code> to prevent trash.</li>
            <li><code>onPlayerRecycleCallback(world, player, item_id, item_amount, gems_earned)</code> — return <code>true</code> to prevent recycle.</li>
            <li><code>onPlayerPunchPlayerCallback(world, player, second_player)</code></li>
            <li><code>onPlayerPunchNPCCallback(world, player, npc_player)</code></li>
            <li><code>onEventChangedCallback(newEventID, oldEventID)</code></li>
            <li><code>onPlayerActionCallback(world, player, data)</code> — generic player action from UI; <code>data["action"]</code> contains action name.</li>
            <li><code>onAutoSaveRequest()</code> — periodic save request; use <code>saveDataToServer</code>.</li>
            <li><code>onDiscordMessageCreateCallback(event)</code> — when a linked Discord channel receives a message.</li>
            <li><code>onPlayerDNACallback(world, player, resultID, resultAmount)</code></li>
            <li><code>onPlayerTrashCallback(world, player, item_id, item_amount)</code></li>
            <!-- end callbacks list -->
          </ul>
        </div>
      </section>

      <!-- PLAYER -->
      <section id="player" class="section collapsible">
        <button class="collapsible-button">Player API (click to expand)</button>
        <div class="collapsible-content">
          <h3>Player object methods</h3>
          <ul>
            <li><code>player:getGems()</code> — returns player's gem count.</li>
            <li><code>player:removeGems(amount, sendPacket, isDisplay)</code></li>
            <li><code>player:addGems(amount, sendPacket, isDisplay)</code></li>
            <li><code>player:getCoins()</code></li>
            <li><code>player:removeCoins(amount, sendPacket)</code></li>
            <li><code>player:getBankBalance()</code></li>
            <li><code>player:addBankBalance(amount)</code></li>
            <li><code>player:removeBankBalance(amount)</code></li>
            <li><code>player:onConsoleMessage(message)</code> — sends message to player's console.</li>
            <li><code>player:onTalkBubble(netID, message, isApi)</code> — show a talk bubble above a player.</li>
            <li><code>player:onDialogRequest(dialogString)</code> — send dialog using dialog string syntax.</li>
            <li><code>player:getNetID()</code></li>
            <li><code>player:getUserID()</code></li>
            <li><code>player:playAudio(filePath, delay)</code> — plays audio for the player.</li>
            <li><code>player:getItemAmount(itemID)</code></li>
            <li><code>player:changeItem(itemID, amount, isSendPacket)</code> — add/remove item.</li>
            <li><code>player:enterWorld(worldName, doorID)</code></li>
            <li><code>player:getWorldName()</code></li>
            <li><code>player:onTextOverlay(text)</code> — show a large overlay text.</li>
            <li><code>player:getCleanName()</code> — returns name without formatting.</li>
            <li><code>player:hasRole(role)</code>, <code>player:setRole(role)</code></li>
            <li><code>player:addMod(modID, durationSeconds)</code>, <code>player:removeMod(modID)</code></li>
            <li><code>player:getCountry()</code>, <code>player:getPlatform()</code> (platform IDs: 0=Win,1=iOS,2=macOS,4=Android).</li>
            <li><code>player:sendVariant(variantTable, delay, netID)</code> — send raw variant packet.</li>
            <li><code>player:sendAction(actionString)</code> — send default Growtopia action (e.g., sound).</li>
            <li><code>player:getInventoryItems()</code> — returns table of inventory items.</li>
            <li><code>player:getWorld()</code> — returns the player's current world object.</li>
            <li><code>player:disconnect()</code></li>
            <li><code>player:hasTitle(id)</code>, <code>player:addTitle(id)</code>, <code>player:removeTitle(id)</code></li>
            <li><code>player:isOnline()</code>, <code>player:getType()</code> — non-zero means NPC.</li>
            <li><code>player:isFacingLeft()</code></li>
            <li><code>player:addMail(mailDataTable)</code>, <code>player:clearMailbox()</code></li>
            <li><code>player:setNickname(name)</code>, <code>player:resetNickname()</code></li>
            <li><code>player:onClothesUI(targetPlayer)</code>, <code>player:onAchievementsUI(targetPlayer)</code>, <code>player:onTitlesUI(targetPlayer)</code></li>
            <li><code>player:onTradeScanUI()</code>, <code>player:onGrow4GoodUI()</code>, <code>player:onRedeemMenu()</code></li>
            <li><code>player:getClothingItemID(slot)</code></li>
            <li><code>player:getUnlockedAchievementsCount()</code>, <code>player:getAchievementsCount()</code></li>
            <li><code>player:getBackpackUsedSize()</code></li>
            <li><code>player:setNextDialogRGBA(r,g,b,a)</code>, <code>player:setNextDialogBorderRGBA(r,g,b,a)</code>, <code>player:resetDialogColor()</code></li>
          </ul>
        </div>
      </section>

      <!-- WORLD -->
      <section id="world" class="section collapsible">
        <button class="collapsible-button">World API (click to expand)</button>
        <div class="collapsible-content">
          <h3>World object methods</h3>
          <ul>
            <li><code>world:getOwner()</code></li>
            <li><code>world:getName()</code></li>
            <li><code>world:useItemEffect(playerNetID, itemID, targetNetID, effectDelay)</code></li>
            <li><code>world:updateClothing(player)</code></li>
            <li><code>world:spawnGems(x, y, amount, player)</code></li>
            <li><code>world:getVisiblePlayersCount()</code></li>
            <li><code>world:getPlayersCount(includeInvisible)</code></li>
            <li><code>world:onCreateChatBubble(x, y, text, netID)</code></li>
            <li><code>world:onCreateExplosion(x, y, radius, power)</code></li>
            <li><code>world:addXP(player, amount)</code></li>
            <li><code>world:setPlayerPosition(player, x, y)</code></li>
            <li><code>world:getDroppedItems()</code></li>
            <li><code>world:getTileDroppedItems(tile)</code></li>
            <li><code>world:removeDroppedItem(dropUID)</code></li>
            <li><code>world:getTile(x, y)</code></li>
            <li><code>world:setTileForeground(tile, itemID, isVisual, player)</code></li>
            <li><code>world:setTileBackground(tile, itemID, isVisual, player)</code></li>
            <li><code>world:kill(player)</code></li>
            <li><code>world:hasAccess(player)</code>, <code>world:hasTileAccess(player, tile)</code></li>
            <li><code>world:punchTile(tile)</code></li>
            <li><code>world:updateTile(tile)</code></li>
            <li><code>world:getPlayers()</code></li>
            <li><code>world:setClothing(player, item_id)</code></li>
            <li><code>world:adjustGems(player, tile, gem_count, val)</code></li>
            <li><code>world:onLoot(player, tile, gem_count)</code></li>
            <li><code>world:getSizeX()</code>, <code>world:getSizeY()</code></li>
            <li><code>world:getTiles()</code>, <code>world:getTilesByActionType(actionType)</code></li>
            <li><code>world:createNPC(name, x, y)</code>, <code>world:findNPCByName(name)</code></li>
            <li><code>world:removeNPC(npc)</code></li>
          </ul>
        </div>
      </section>

      <!-- TILE -->
      <section id="tile" class="section collapsible">
        <button class="collapsible-button">Tile API (click to expand)</button>
        <div class="collapsible-content">
          <h3>Tile object methods</h3>
          <ul>
            <li><code>tile:getTileID()</code></li>
            <li><code>tile:getPosX()</code>, <code>tile:getPosY()</code></li>
            <li><code>tile:getTileForeground()</code>, <code>tile:getTileBackground()</code></li>
            <li><code>tile:getTileData(property)</code></li>
            <li><code>tile:setTileDataInt(property, value)</code> — requires <code>world:updateTile</code> to reflect visually.</li>
            <li><code>tile:getTileItem()</code></li>
          </ul>
        </div>
      </section>

      <!-- ITEM -->
      <section id="item" class="section collapsible">
        <button class="collapsible-button">Item API (click to expand)</button>
        <div class="collapsible-content">
          <h3>Item functions</h3>
          <ul>
            <li><code>getItem(itemID)</code> — returns the global item object.</li>
            <li>Item methods: <code>item:getName()</code>, <code>item:getRarity()</code>, <code>item:getActionType()</code></li>
            <li><code>item:getGrowTime()</code>, <code>item:setGrowTime(seconds)</code></li>
            <li><code>item:setActionType(type)</code>, <code>item:setDescription(text)</code></li>
            <li><code>item:getCategoryType()</code>, <code>item:getEditableType()</code></li>
            <li><code>item:setPrice(price)</code>, <code>item:isObtainable()</code></li>
            <li><code>item:getNetID()</code>, <code>item:getGems(world, player)</code>, <code>item:getXP(world, player)</code></li>
          </ul>
        </div>
      </section>

      <!-- INVENTORY / DROP -->
      <section id="inventory_drop" class="section collapsible">
        <button class="collapsible-button">Inventory & Drop (click to expand)</button>
        <div class="collapsible-content">
          <h3>Inventory item & drop methods</h3>
          <ul>
            <li><code>inventory_item:getItemID()</code>, <code>inventory_item:getItemCount()</code></li>
            <li><code>drop:getItemID()</code>, <code>drop:getItemCount()</code></li>
            <li><code>drop:getPosX()</code>, <code>drop:getPosY()</code></li>
            <li><code>drop:getUID()</code>, <code>drop:getFlags()</code></li>
          </ul>
        </div>
      </section>

      <!-- SERVER & GLOBAL -->
      <section id="server_global" class="section collapsible">
        <button class="collapsible-button">Server & Global (click to expand)</button>
        <div class="collapsible-content">
          <h3>Server & global functions</h3>
          <ul>
            <li><code>getItemsCount()</code></li>
            <li><code>getPlayerByName(name)</code></li>
            <li><code>getServerCurrentEvent()</code></li>
            <li><code>getEnumItem(enumName)</code></li>
            <li><code>reloadScripts()</code></li>
            <li><code>getServerName()</code></li>
            <li><code>addWorldMenuWorld(worldID, displayName, color, priority)</code></li>
            <li><code>removeWorldMenuWorld(worldID)</code></li>
            <li><code>hideWorldMenuDefaultSpecialWorlds(hide)</code></li>
            <li><code>getServerPlayers()</code></li>
            <li><code>loadDataFromServer(key)</code>, <code>saveDataToServer(key, dataTable)</code></li>
            <li><code>loadStringFromServer(key)</code>, <code>saveStringToServer(key, value)</code></li>
            <li><code>getAllPlayers()</code></li>
            <li><code>getMaxLevel()</code></li>
            <li><code>registerLuaEvent(eventData)</code></li>
            <li><code>addSidebarButton(buttonJson)</code></li>
            <li><code>addSocialPortalButton(buttonDef, callback)</code></li>
            <li><code>getTopPlayerByBalance()</code>, <code>getTopWorldByVisitors()</code></li>
          </ul>
        </div>
      </section>

      <!-- OS LIBRARY -->
      <section id="os_library" class="section collapsible">
        <button class="collapsible-button">OS Library (click to expand)</button>
        <div class="collapsible-content">
          <h3>OS functions</h3>
          <ul>
            <li><code>os.execute(command)</code> — execute a system command (use with caution).</li>
            <li><code>os.time()</code>, <code>os.clock()</code>, <code>os.date()</code></li>
            <li><code>os.getenv(varname)</code></li>
            <li><code>os.remove(filename)</code>, <code>os.rename(oldname, newname)</code></li>
            <li><code>os.setlocale(locale, category)</code>, <code>os.exit(code)</code></li>
          </ul>
        </div>
      </section>

      <!-- LIBRARIES -->
      <section id="libraries" class="section collapsible">
        <button class="collapsible-button">Libraries (click to expand)</button>
        <div class="collapsible-content">
          <h3>Built-in libraries</h3>
          <ul>
            <li><code>http.get(url, headers)</code> — performs HTTP GET; must be wrapped in a coroutine.</li>
            <li><code>http.post(url, headers, postData)</code> — performs HTTP POST; must be wrapped in a coroutine.</li>
            <li><code>json.encode(dataTable)</code> — encode Lua table to JSON string.</li>
            <li><code>json.decode(jsonString)</code> — decode JSON to Lua table.</li>
          </ul>
        </div>
      </section>

      <!-- DIALOG SYNTAX -->
      <section id="dialog_syntax" class="section collapsible">
        <button class="collapsible-button">Dialog Syntax (click to expand)</button>
        <div class="collapsible-content">
          <h3>Dialog string components</h3>
          <p>Dialogs are built from special string commands:</p>
          <ul>
            <li><code>set_default_color|color</code></li>
            <li><code>set_border_color|r,g,b,a</code></li>
            <li><code>set_bg_color|r,g,b,a</code></li>
            <li><code>set_custom_spacing|x:value;y:value|</code></li>
            <li><code>add_custom_break|</code></li>
            <li><code>start_custom_tabs|</code>, <code>end_custom_tabs|</code></li>
            <li><code>disable_resize|</code>, <code>reset_placement_x|</code></li>
            <li><code>add_label|size|message|alignment</code>, <code>add_smalltext|message</code></li>
            <li><code>add_textbox|message</code>, <code>add_button|name|label|flags|0|0</code></li>
            <li><code>add_small_font_button|name|label|flags|0|0</code>, <code>add_text_input|name|message|default|length</code></li>
            <li><code>add_checkbox|name|message|checked</code>, <code>add_item_picker|name|message|placeholder</code></li>
            <li><code>add_spacer|size</code>, <code>add_quick_exit|</code></li>
            <li><code>embed_data|key|value</code> — embed dialog_name or other metadata.</li>
            <li><code>add_label_with_icon|size|message|alignment|iconID</code></li>
            <li><code>add_button_with_icon|name|text|options|itemID|...</code></li>
            <li>And many more UI components (searchable lists, banners, progress bars, etc.).</li>
          </ul>

          <h4>Dialog UI helpers</h4>
          <ul>
            <li><code>add_player_info|name|level|exp|expRequired</code></li>
            <li><code>add_progress_bar|name|size|text|current|max|color</code></li>
            <li><code>add_image_button|name|imagePath|flags|open|label</code></li>
            <li><code>add_tab_button|name|label|iconPath|x|y</code></li>
            <li><code>add_banner|imagePath|x|y</code>, <code>add_big_banner|imagePath|x|y|text</code></li>
            <li><code>add_searchable_item_list|data|options|searchFixedName</code></li>
            <li><code>add_label_with_icon_button|size|message|alignment|iconID|buttonName</code></li>
            <li><code>add_achieve_button|achName|achToGet|achID|unk</code></li>
            <li><code>add_community_button|button|btnName|flags|0|0</code></li>
          </ul>
        </div>
      </section>

      <!-- EXAMPLES -->
      <section id="examples" class="section collapsible">
        <button class="collapsible-button">Examples (click to expand)</button>
        <div class="collapsible-content">
          <h3>Dialog & basic examples</h3>

          <h4>Send welcome on login</h4>
          <pre><code>function onPlayerLoginCallback(player)
  player:onConsoleMessage("Welcome to the server!")
  player:onTalkBubble(player:getNetID(), "Hi there!", true)
end
</code></pre>

          <h4>Spawn gems when player enters world</h4>
          <pre><code>function onPlayerEnterWorldCallback(world, player)
  world:spawnGems(5, 5, 10, player)
end
</code></pre>

          <h4>Prevent placement of specific item</h4>
          <pre><code>function onTilePlaceCallback(world, player, tile, placingID)
  if placingID == 1234 then
    return true -- block placement of item 1234
  end
end
</code></pre>

          <h4>HTTP request (coroutine)</h4>
          <pre><code>function fetchData()
  coroutine.wrap(function()
    local ok, res = pcall(function()
      return http.get("https://example.com/api", {["User-Agent"]="Growsoft"})
    end)
    if ok and res then
      local data = json.decode(res)
      -- handle data
    end
  end)()
end
</code></pre>

          <p class="muted">Note: Examples above are basic—there are many more advanced examples you can add (webhooks, monitoring, NPC creation, custom dialogs, etc.). If you want, I can add specific examples like monitoring CPU to webhook or Discord integration.</p>
        </div>
      </section>

      <footer class="footer">
        <div>Created for you — <strong>Growsoft Docs</strong> • Minimal Gaming Theme</div>
        <div class="small">
          Hosted on 
          <a href="https://bilzxdx.github.io/growsoft-docs/" target="_blank" style="color:#5fd0ff;text-decoration:none;">
            https://bilzxdx.github.io/growsoft-docs/
          </a>
        </div>
      </footer>
    </main>
  </div>

  <script>
    // Collapsible panels
    document.querySelectorAll('.collapsible .collapsible-button').forEach(btn => {
      btn.addEventListener('click', () => {
        const section = btn.parentElement;
        section.classList.toggle('open');
        const content = section.querySelector('.collapsible-content');
        if (section.classList.contains('open')) {
          content.style.maxHeight = content.scrollHeight + 'px';
          btn.innerText = btn.innerText.replace(' (click to expand)',' (click to collapse)');
        } else {
          content.style.maxHeight = null;
          btn.innerText = btn.innerText.replace(' (click to collapse)',' (click to expand)');
        }
      });
    });

    // Smooth scroll for sidebar links
    document.querySelectorAll('.nav-item').forEach(a => {
      a.addEventListener('click', (e) => {
        e.preventDefault();
        const id = a.getAttribute('href').slice(1);
        const el = document.getElementById(id);
        if (el) {
          // Expand the section before scrolling (if collapsible)
          if (el.classList.contains('collapsible') && !el.classList.contains('open')) {
            const btn = el.querySelector('.collapsible-button');
            if (btn) btn.click();
            // wait for expand animation
            setTimeout(() => el.scrollIntoView({behavior: 'smooth', block:'start'}), 220);
          } else {
            el.scrollIntoView({behavior:'smooth', block:'start'});
          }
        }
      });
    });

    // Highlight active nav on scroll
    const sections = Array.from(document.querySelectorAll('.section'));
    window.addEventListener('scroll', () => {
      const pos = window.scrollY + 140;
      sections.forEach(s => {
        const top = s.offsetTop;
        const bottom = top + s.offsetHeight;
        const id = s.id;
        const navA = document.querySelector('.nav a[href="#' + id + '"]');
        if (!navA) return;
        if (pos >= top && pos < bottom) {
          document.querySelectorAll('.nav a').forEach(x => x.classList.remove('active'));
          navA.classList.add('active');
        }
      });
    });

    // init: collapse all, but keep Home open
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.collapsible').forEach((s, idx) => {
        const btn = s.querySelector('.collapsible-button');
        const content = s.querySelector('.collapsible-content');
        if (idx === 0) {
          s.classList.add('open');
          content.style.maxHeight = content.scrollHeight + 'px';
          if (btn) btn.innerText = btn.innerText.replace(' (click to expand)',' (click to collapse)');
        } else {
          if (content) content.style.maxHeight = null;
        }
      });
    });
  </script>
</body>
</html>
