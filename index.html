<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Growsoft Docs â€” Interactive</title>

  <!-- Google fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Orbitron:wght@600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="title-wrap">
        <div class="title-fake" aria-hidden="true"></div>
        <div class="site-title">GROWSOFT</div>
      </div>

      <nav class="top-actions">
        <a class="small-btn" href="#overview">Get Started</a>
        <a class="small-btn ghost" href="https://github.com/bilzxdx/growsoft-docs" target="_blank" rel="noopener">GitHub</a>
        <a class="small-btn ghost" href="https://discord.gg/smgS6sq83y" target="_blank" rel="noopener">Discord</a>
      </nav>
    </div>
  </header>

  <div id="app">
    <aside class="sidebar" aria-label="Navigation">
      <div class="search-wrap">
        <svg class="search-icon" viewBox="0 0 24 24"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.471 6.471 0 001.57-5.34C15.2 5.59 12.61 3 9.5 3S3.8 5.59 3.8 8.39 6.39 13.78 9.5 13.78c1.61 0 3.09-.59 4.22-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zM9.5 12c-2.02 0-3.7-1.68-3.7-3.74S7.48 4.5 9.5 4.5s3.7 1.68 3.7 3.76S11.52 12 9.5 12z"/></svg>
        <input id="search" type="search" placeholder="Search sections..." aria-label="Search sections" />
      </div>

      <nav class="nav" id="navlist">
        <a href="#overview" class="nav-item">Overview</a>
        <a href="#callbacks" class="nav-item">Callbacks</a>
        <a href="#commands" class="nav-item">Commands</a>
        <a href="#dialog_syntax" class="nav-item">Dialog Syntax</a>
        <a href="#player" class="nav-item">Player</a>
        <a href="#world" class="nav-item">World</a>
        <a href="#tile" class="nav-item">Tile</a>
        <a href="#item" class="nav-item">Item</a>
        <a href="#inventory" class="nav-item">Inventory Item</a>
        <a href="#drop" class="nav-item">Drop</a>
        <a href="#server_global" class="nav-item">Server & Global</a>
        <a href="#os_library" class="nav-item">OS Library</a>
        <a href="#libraries" class="nav-item">Libraries</a>
        <a href="#examples" class="nav-item">Examples</a>
      </nav>

      <div class="sidebar-footer">
        <div class="muted">Theme: Premium â€¢ Interactive</div>
        <div class="muted">Hosted: <a class="link" href="https://bilzxdx.github.io/growsoft-docs/" target="_blank">bilzxdx.github.io/growsoft-docs</a></div>
      </div>
    </aside>

    <main class="content">
      <!-- HERO / Overview -->
      <section id="overview" class="hero card open">
        <div class="hero-left">
          <h1>Growsoft Docs</h1>
          <p class="lead">Authoritative Growsoft Lua API documentation. Click a section's "Show APIs" to reveal function cards. Each function has its own bordered panel and a copy button for quick usage.</p>
          <div class="cta-row">
            <a class="btn primary" href="#callbacks">API Reference</a>
            <a class="btn" href="#examples">Examples</a>
            <a class="btn ghost" href="https://bilzxdx.github.io/growsoft-docs/" target="_blank">Live Site</a>
          </div>
        </div>

        <div class="hero-right">
          <div class="hero-stats">
            <div><strong>Sections</strong><span>14</span></div>
            <div><strong>Version</strong><span>1.0.0</span></div>
            <div><strong>Interactive</strong><span>Copy buttons</span></div>
          </div>
        </div>
      </section>

      <!-- SECTION TEMPLATE: each section collapsed by default -->
      <!-- CALLBACKS -->
      <section id="callbacks" class="card section-collapsible">
        <div class="panel-header">
          <h2>Callbacks</h2>
          <div class="panel-actions">
            <button class="btn small show-btn">Show APIs</button>
            <button class="btn small ghost" data-collapse>Collapse</button>
          </div>
        </div>

        <div class="panel-body hide">
          <p class="muted">Engine-level callbacks. Click the copy icon to copy the function signature.</p>

          <div class="api-grid">
            <!-- Function card -->
            <article class="api-card">
              <div class="api-top">
                <code class="api-title">onPlayerDialogCallback(world, player, data)</code>
                <button class="copy-btn" data-copy="onPlayerDialogCallback(world, player, data)"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Handles player dialog interactions. <code>data</code> contains <code>dialog_name</code> and <code>buttonClicked</code>.</p>
            </article>

            <article class="api-card">
              <div class="api-top">
                <code class="api-title">onPlayerConsumableCallback(world, player, tile, clickedPlayer, itemID)</code>
                <button class="copy-btn" data-copy="onPlayerConsumableCallback(world, player, tile, clickedPlayer, itemID)"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Triggered when a player uses a consumable item.</p>
            </article>

            <article class="api-card">
              <div class="api-top">
                <code class="api-title">onTileWrenchCallback(world, player, tile)</code>
                <button class="copy-btn" data-copy="onTileWrenchCallback(world, player, tile)"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Triggered when a player wrenches a tile.</p>
            </article>

            <article class="api-card">
              <div class="api-top">
                <code class="api-title">onPlayerLoginCallback(player)</code>
                <button class="copy-btn" data-copy="onPlayerLoginCallback(player)"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Called when a player logs in.</p>
            </article>

            <!-- add more as needed... -->
          </div>
        </div>
      </section>

      <!-- COMMANDS -->
      <section id="commands" class="card section-collapsible">
        <div class="panel-header">
          <h2>Commands</h2>
          <div class="panel-actions">
            <button class="btn small show-btn">Show APIs</button>
            <button class="btn small ghost" data-collapse>Collapse</button>
          </div>
        </div>

        <div class="panel-body hide">
          <p class="muted">Register custom slash commands.</p>

          <div class="api-grid">
            <article class="api-card">
              <div class="api-top">
                <code class="api-title">registerLuaCommand(commandData)</code>
                <button class="copy-btn" data-copy="registerLuaCommand(commandData)"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Registers a new command. <code>commandData</code> example: <code>{ command='name', roleRequired=0, description='desc' }</code>.</p>
            </article>
          </div>
        </div>
      </section>

      <!-- DIALOG SYNTAX -->
      <section id="dialog_syntax" class="card section-collapsible">
        <div class="panel-header">
          <h2>Dialog Syntax</h2>
          <div class="panel-actions">
            <button class="btn small show-btn">Show APIs</button>
            <button class="btn small ghost" data-collapse>Collapse</button>
          </div>
        </div>

        <div class="panel-body hide">
          <p class="muted">Dialog string components used to build UI dialogs.</p>

          <div class="api-grid">
            <article class="api-card">
              <div class="api-top">
                <code class="api-title">set_default_color|color</code>
                <button class="copy-btn" data-copy="set_default_color|color"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Set default dialog text color.</p>
            </article>

            <article class="api-card">
              <div class="api-top">
                <code class="api-title">add_button|name|label|flags|0|0</code>
                <button class="copy-btn" data-copy="add_button|name|label|flags|0|0"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Add a standard dialog button.</p>
            </article>
          </div>
        </div>
      </section>

      <!-- PLAYER -->
      <section id="player" class="card section-collapsible">
        <div class="panel-header">
          <h2>Player API</h2>
          <div class="panel-actions">
            <button class="btn small show-btn">Show APIs</button>
            <button class="btn small ghost" data-collapse>Collapse</button>
          </div>
        </div>

        <div class="panel-body hide">
          <div class="api-grid">
            <article class="api-card">
              <div class="api-top">
                <code class="api-title">player:getGems()</code>
                <button class="copy-btn" data-copy="player:getGems()"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Returns the player's gem count.</p>
            </article>

            <article class="api-card">
              <div class="api-top">
                <code class="api-title">player:addGems(amount, sendPacket, isDisplay)</code>
                <button class="copy-btn" data-copy="player:addGems(amount, sendPacket, isDisplay)"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Add gems to a player's account.</p>
            </article>

            <article class="api-card">
              <div class="api-top">
                <code class="api-title">player:removeGems(amount, sendPacket, isDisplay)</code>
                <button class="copy-btn" data-copy="player:removeGems(amount, sendPacket, isDisplay)"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Remove gems from a player.</p>
            </article>
          </div>
        </div>
      </section>

      <!-- WORLD -->
      <section id="world" class="card section-collapsible">
        <div class="panel-header">
          <h2>World API</h2>
          <div class="panel-actions">
            <button class="btn small show-btn">Show APIs</button>
            <button class="btn small ghost" data-collapse>Collapse</button>
          </div>
        </div>

        <div class="panel-body hide">
          <div class="api-grid">
            <article class="api-card">
              <div class="api-top">
                <code class="api-title">world:getOwner()</code>
                <button class="copy-btn" data-copy="world:getOwner()"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Returns the player object of the world's owner.</p>
            </article>

            <article class="api-card">
              <div class="api-top">
                <code class="api-title">world:spawnGems(x, y, amount, player)</code>
                <button class="copy-btn" data-copy="world:spawnGems(x, y, amount, player)"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Spawn gems at a tile coordinate.</p>
            </article>
          </div>
        </div>
      </section>

      <!-- TILE -->
      <section id="tile" class="card section-collapsible">
        <div class="panel-header">
          <h2>Tile API</h2>
          <div class="panel-actions">
            <button class="btn small show-btn">Show APIs</button>
            <button class="btn small ghost" data-collapse>Collapse</button>
          </div>
        </div>

        <div class="panel-body hide">
          <div class="api-grid">
            <article class="api-card">
              <div class="api-top">
                <code class="api-title">tile:getTileID()</code>
                <button class="copy-btn" data-copy="tile:getTileID()"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Get the tile's foreground item ID.</p>
            </article>
          </div>
        </div>
      </section>

      <!-- ITEM -->
      <section id="item" class="card section-collapsible">
        <div class="panel-header">
          <h2>Item API</h2>
          <div class="panel-actions">
            <button class="btn small show-btn">Show APIs</button>
            <button class="btn small ghost" data-collapse>Collapse</button>
          </div>
        </div>

        <div class="panel-body hide">
          <div class="api-grid">
            <article class="api-card">
              <div class="api-top">
                <code class="api-title">getItem(itemID)</code>
                <button class="copy-btn" data-copy="getItem(itemID)"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Returns the global item object for the given ID.</p>
            </article>
          </div>
        </div>
      </section>

      <!-- INVENTORY -->
      <section id="inventory" class="card section-collapsible">
        <div class="panel-header">
          <h2>Inventory Item</h2>
          <div class="panel-actions">
            <button class="btn small show-btn">Show APIs</button>
            <button class="btn small ghost" data-collapse>Collapse</button>
          </div>
        </div>

        <div class="panel-body hide">
          <div class="api-grid">
            <article class="api-card">
              <div class="api-top">
                <code class="api-title">inventory_item:getItemID()</code>
                <button class="copy-btn" data-copy="inventory_item:getItemID()"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Returns the inventory item's ID.</p>
            </article>
          </div>
        </div>
      </section>

      <!-- DROP -->
      <section id="drop" class="card section-collapsible">
        <div class="panel-header">
          <h2>Drop</h2>
          <div class="panel-actions">
            <button class="btn small show-btn">Show APIs</button>
            <button class="btn small ghost" data-collapse>Collapse</button>
          </div>
        </div>

        <div class="panel-body hide">
          <div class="api-grid">
            <article class="api-card">
              <div class="api-top">
                <code class="api-title">drop:getItemID()</code>
                <button class="copy-btn" data-copy="drop:getItemID()"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Get dropped item ID.</p>
            </article>
          </div>
        </div>
      </section>

      <!-- SERVER & GLOBAL -->
      <section id="server_global" class="card section-collapsible">
        <div class="panel-header">
          <h2>Server & Global</h2>
          <div class="panel-actions">
            <button class="btn small show-btn">Show APIs</button>
            <button class="btn small ghost" data-collapse>Collapse</button>
          </div>
        </div>

        <div class="panel-body hide">
          <div class="api-grid">
            <article class="api-card">
              <div class="api-top">
                <code class="api-title">getItemsCount()</code>
                <button class="copy-btn" data-copy="getItemsCount()"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Returns total number of items loaded on server.</p>
            </article>

            <article class="api-card">
              <div class="api-top">
                <code class="api-title">reloadScripts()</code>
                <button class="copy-btn" data-copy="reloadScripts()"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Reload all Lua scripts on the server.</p>
            </article>
          </div>
        </div>
      </section>

      <!-- OS LIBRARY -->
      <section id="os_library" class="card section-collapsible">
        <div class="panel-header">
          <h2>OS Library</h2>
          <div class="panel-actions">
            <button class="btn small show-btn">Show APIs</button>
            <button class="btn small ghost" data-collapse>Collapse</button>
          </div>
        </div>

        <div class="panel-body hide">
          <div class="api-grid">
            <article class="api-card">
              <div class="api-top">
                <code class="api-title">os.execute(command)</code>
                <button class="copy-btn" data-copy="os.execute(command)"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Execute OS command (use carefully).</p>
            </article>
          </div>
        </div>
      </section>

      <!-- LIBRARIES -->
      <section id="libraries" class="card section-collapsible">
        <div class="panel-header">
          <h2>Libraries</h2>
          <div class="panel-actions">
            <button class="btn small show-btn">Show APIs</button>
            <button class="btn small ghost" data-collapse>Collapse</button>
          </div>
        </div>

        <div class="panel-body hide">
          <div class="api-grid">
            <article class="api-card">
              <div class="api-top">
                <code class="api-title">http.get(url, headers)</code>
                <button class="copy-btn" data-copy="http.get(url, headers)"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">HTTP GET â€” must be wrapped in coroutine.</p>
            </article>

            <article class="api-card">
              <div class="api-top">
                <code class="api-title">json.decode(jsonString)</code>
                <button class="copy-btn" data-copy="json.decode(jsonString)"><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <p class="api-desc">Decode JSON string to Lua table.</p>
            </article>
          </div>
        </div>
      </section>

      <!-- EXAMPLES -->
      <section id="examples" class="card section-collapsible">
        <div class="panel-header">
          <h2>Examples</h2>
          <div class="panel-actions">
            <button class="btn small show-btn">Show APIs</button>
            <button class="btn small ghost" data-collapse>Collapse</button>
          </div>
        </div>

        <div class="panel-body hide">
          <div class="api-grid full-width">
            <article class="api-card">
              <div class="api-top">
                <code class="api-title">onPlayerLoginCallback example</code>
                <button class="copy-btn" data-copy='function onPlayerLoginCallback(player)\n  player:onConsoleMessage("Welcome to the server!")\nend'><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <pre class="api-desc"><code>function onPlayerLoginCallback(player)
  player:onConsoleMessage("Welcome to the server!")
end</code></pre>
            </article>

            <article class="api-card">
              <div class="api-top">
                <code class="api-title">Spawn gems example</code>
                <button class="copy-btn" data-copy='function onPlayerEnterWorldCallback(world, player)\n  world:spawnGems(5, 5, 10, player)\nend'><span class="icon">ðŸ“‹</span> Copy</button>
              </div>
              <pre class="api-desc"><code>function onPlayerEnterWorldCallback(world, player)
  world:spawnGems(5, 5, 10, player)
end</code></pre>
            </article>
          </div>
        </div>
      </section>

      <footer class="site-footer">
        <div>Created for you â€” <strong>Growsoft Docs</strong> â€¢ Interactive</div>
        <div class="muted">Hosted on <a class="link" href="https://bilzxdx.github.io/growsoft-docs/" target="_blank">https://bilzxdx.github.io/growsoft-docs/</a></div>
      </footer>
    </main>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast" aria-live="polite"></div>

  <script>
    // Smooth scrolling & nav active
    const navLinks = document.querySelectorAll('.nav-item');
    const docSections = Array.from(document.querySelectorAll('section[id]'));

    navLinks.forEach(a => {
      a.addEventListener('click', e => {
        e.preventDefault();
        const id = a.getAttribute('href').slice(1);
        const el = document.getElementById(id);
        if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });

    window.addEventListener('scroll', () => {
      const y = window.scrollY + 180;
      docSections.forEach(s => {
        const top = s.offsetTop;
        const bottom = top + s.offsetHeight;
        const link = document.querySelector('.nav a[href="#' + s.id + '"]');
        if (!link) return;
        if (y >= top && y < bottom) {
          document.querySelectorAll('.nav a').forEach(x => x.classList.remove('active'));
          link.classList.add('active');
        }
      });
    });

    // Collapsible panels: Show APIs + Collapse
    document.querySelectorAll('.section-collapsible').forEach(section => {
      const showBtn = section.querySelector('.show-btn');
      const collapseBtn = section.querySelector('[data-collapse]');
      const body = section.querySelector('.panel-body');

      // collapsed by default: body has class 'hide'
      if (showBtn) {
        showBtn.addEventListener('click', () => {
          body.classList.remove('hide');
          body.style.maxHeight = body.scrollHeight + 'px';
          section.classList.add('open');
          // hide show button after opening
          showBtn.style.display = 'none';
        });
      }

      if (collapseBtn) {
        collapseBtn.addEventListener('click', () => {
          body.style.maxHeight = null;
          setTimeout(() => body.classList.add('hide'), 240);
          section.classList.remove('open');
          if (showBtn) showBtn.style.display = '';
        });
      }
    });

    // Copy buttons & toast
    const toast = document.getElementById('toast');
    function showToast(msg) {
      toast.textContent = msg;
      toast.classList.add('show');
      clearTimeout(window._toastTimer);
      window._toastTimer = setTimeout(() => {
        toast.classList.remove('show');
      }, 1800);
    }

    document.querySelectorAll('.copy-btn').forEach(btn => {
      btn.addEventListener('click', async () => {
        const text = btn.getAttribute('data-copy') || '';
        try {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            await navigator.clipboard.writeText(text);
          } else {
            // fallback
            const ta = document.createElement('textarea');
            ta.value = text;
            document.body.appendChild(ta);
            ta.select();
            document.execCommand('copy');
            ta.remove();
          }
          // small feedback
          btn.classList.add('copied');
          setTimeout(() => btn.classList.remove('copied'), 900);
          showToast('Copied âœ…');
        } catch (err) {
          showToast('Copy failed');
          console.error('copy failed', err);
        }
      });
    });

    // Search filtering for sidebar (dim non-matching)
    const searchInput = document.getElementById('search');
    searchInput.addEventListener('input', () => {
      const q = searchInput.value.trim().toLowerCase();
      const items = document.querySelectorAll('#navlist .nav-item');
      if (!q) {
        items.forEach(i => { i.classList.remove('dim'); i.style.display = ''; });
        return;
      }
      items.forEach(i => {
        const text = i.textContent.trim().toLowerCase();
        if (text.includes(q)) {
          i.classList.remove('dim');
          i.style.display = '';
        } else {
          i.classList.add('dim');
          i.style.display = '';
        }
      });
    });

    // Set overview open on load (we keep other sections collapsed)
    document.addEventListener('DOMContentLoaded', () => {
      const overview = document.getElementById('overview');
      if (overview) overview.classList.add('open');
    });
  </script>
</body>
</html>
